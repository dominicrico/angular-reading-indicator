!function(a,b){"use strict";var c=a.module("ngReadingIndicator",["ngSanitize"]);c.directive("ngReadingIndicator",["$window","$document","$templateCache","$sce","$timeout",function(b,c,d,e,f){var g="",h='<div class="ng-reading-indicator-progress"></div><div class="ng-reading-indicator-headline"><h2 ng-bind-html="headline"></h2></div><div class="ng-reading-indicator-time" ng-if="readingTime"> {{ readingTime }}</div>';return d.put(g,h),{restrict:"AE",scope:{elementClass:"@indicatorElement",userOptions:"&indicatorOptions",headline:"=?indicatorHeadline",lazy:"=?indicatorLazy"},templateUrl:function(a,b){return b.indicatorTemplateUrl||g},link:function(c,d,e){function g(b){return a.forEach(arguments,function(c){c!==b&&a.forEach(c,function(a,c){b[c]&&b[c].constructor&&b[c].constructor===Object?g(b[c],a):b[c]=a})}),b}function h(){f(function(){w.expand||!w.expand&&"small"!==w.type?(w.showHeadline&&c.headline?m=c.headline:w.showHeadline&&!c.headline&&n.find("h1").length>0?(m=a.element(n.find("h1")[0]).html(),v=!1):m=!1,c.headline=m?m:null):c.headine=null,j(),a.element(b).on("scroll",k),a.element(b).on("resize",j)})}function i(a){var b=document.body.getBoundingClientRect(),c=a.getBoundingClientRect();return{top:c.top-b.top,bottom:a.scrollHeight-window.innerHeight>0?a.scrollHeight-window.innerHeight:a.scrollHeight,height:c.height}}function j(){o=i(n[0]).bottom,p=i(n[0]).top,q=i(n[0]).height,u=v?i(n.find("h1")[0]):{top:0},k()}function k(){var e=a.element(b)[0].scrollY||a.element(b)[0].pageYOffset,f=e;"middle"===w.calcFrom?e=f+window.innerHeight/2:"bottom"===w.calcFrom&&(e=f+window.innerHeight),r=p>=e?0:(e-p)/(p-o)*100,w.readingTime.enable?c.$apply(function(){c.readingTime=l()}):c.readingTime=null,s.style.width=r+"%",!w.expand&&"small"===w.type&&e>=p+u.top+w.topOffset||w.expand&&e>p&&e<p+u.top+w.topOffset?(a.element(d)[0].style.height="5px",a.element(d).addClass("ng-reading-indicator-shrink"),a.element(d).removeClass("ng-reading-indicator-expanded")):(!w.expand&&"big"===w.type||w.expand)&&e>=p+u.top+w.topOffset?(a.element(d).removeClass("ng-reading-indicator-shrink"),a.element(d).addClass("ng-reading-indicator-expanded"),a.element(d)[0].style.height=""):(a.element(d)[0].style.height="0",a.element(d).addClass("ng-reading-indicator-shrink"),a.element(d).removeClass("ng-reading-indicator-expanded"))}function l(){var b=a.element(n[0]).text().trim().split(" ").length,c=Math.floor(b/w.readingTime.speed),d=Math.floor(b%w.readingTime.speed/(w.readingTime.speed/60)),e=w.readingTime.prefix;return d>=30&&c++,Math.floor(c*(1-r/100))>0||!w.readingTime.seconds?(c*=1-r/100,e+=Math.floor(c),e+=w.readingTime.minutesSuffix):0===Math.floor(c*(1-r/100))&&w.readingTime.seconds?(e+=Math.round(60*c*(1-r/100)/10)*w.readingTime.secondInterval,e+=w.readingTime.secondsSuffix):e+=0+w.readingTime.secondsSuffix,e}var m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=!1,w={calcFrom:"middle",showHeadline:!0,expand:!0,type:"small",topOffset:150,readingTime:{enable:!0,prefix:"remaining estimate ",minutesSuffix:"min",secondsSuffix:"sec",speed:150,seconds:!0,secondInterval:5}};g(w,c.userOptions()),"bottom"!==w.calcFrom&&"top"!==w.calcFrom&&"bottom"!==w.calcFrom&&(w.calcFrom="middle"),w.expand||"small"===w.type?w.expand||"big"===w.type||a.element(d).addClass("ng-reading-indicator-shrink"):a.element(d).addClass("ng-reading-indicator-expanded"),t=c.elementClass&&""!==c.elementClass?c.elementClass:b,n=c.elementClass&&""!==c.elementClass?a.element(document.getElementsByClassName(t.replace(".",""))[0]):a.element(document.body),s=document.getElementsByClassName("ng-reading-indicator-progress")[0],e.indicatorLazy&&""!==e.indicatorLazy?c.$watch("lazy",function(a){(""!==a||a.length>0)&&h()}):h(),c.$on("$destroy",function(){a.element(b).off("scroll",k),a.element(b).off("resize",j)})}}}])}(window.angular);
//# sourceMappingURL=ng-reading-indicator.min.js.map